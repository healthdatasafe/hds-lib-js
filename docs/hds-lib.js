var HDSLib;(()=>{var t={196:(t,e,r)=>{const s=r(831);function n(t){const e=Reflect.ownKeys(t);for(const r of e){const e=t[r];(e&&"object"==typeof e||"function"==typeof e)&&n(e)}return Object.freeze(t)}function o(t,e){if(t)for(const r of t){if(e[r.id])throw new Error(`Duplicate streamId "${r.id}" for strean ${JSON.stringify(r)}`);e[r.id]=r,o(r.children,e)}}t.exports=class{#t;#e;#r;#s;#n;constructor(t){this.#t=t,this.#r={},this.#s={},this.#n={}}async load(){const t=await fetch(this.#t),e=await t.text(),r=JSON.parse(e);this.#e=r,function(t,e){for(const[r,s]of Object.entries(t)){s.key=r;const t=[];s.eventType?t.push(s.eventType):t.push(...Object.keys(s.variations.eventType));for(const r of t){const t=s.streamId+":"+r;if(e[t])throw new Error(`Duplicate streamId + eventType "${t}" for item ${JSON.stringify(s)}`);e[t]=s}}}(this.#e.items,this.#s),o(this.#e.streams,this.#n),n(this.#e)}itemDefForKey(t,e=!0){if(this.#r[t])return this.#r[t];const r=this.#e.items[t];if(!r){if(e)throw new Error("Cannot find item definition with key: "+t);return null}return this.#r[t]=new s(t,r),this.#r[t]}itemDefForEvent(t,e=!0){const r=[];for(const e of t.streamIds){const s=e+":"+t.type,n=this.#s[s];n&&r.push(n)}if(0===r.length){if(e)throw new Error("Cannot find definition for event: "+JSON.stringify(t));return null}if(r.length>1)throw new Error(`Found multiple matching definitions "${r.map((t=>t.key)).join(", ")}" for event: ${JSON.stringify(t)}`);return this.itemDefForKey(r[0].key,e)}streamsGetNecessaryListForItemKeys(t){const e=[],r=new Map;for(const s of t){const t=this.itemDefForKey(s),n=this.streamGetParentsIds(t.data.streamId,!0,[t.data.streamId]);for(const t of n){if(r.has(t))continue;const s=this.streamDataGetById(t);r.set(t,!0),e.push({id:t,name:s.name,parentId:s.parentId})}}return e}streamDataGetById(t,e=!0){const r=this.#n[t];if(e&&!r)throw new Error(`Stream with id: "${t}" not found`);return r}streamGetParentsIds(t,e=!0,r=[]){const s=this.streamDataGetById(t,e);return null!==s.parentId&&(r.unshift(s.parentId),this.streamGetParentsIds(s.parentId,!0,r)),r}}},831:t=>{t.exports=class{#o;#i;constructor(t,e){this.#i=t,this.#o=e}get eventTypes(){return this.#o.eventType?[this.#o.eventType]:Object.keys(this.#o.variations.eventType)}get key(){return this.#i}get data(){return this.#o}}}},e={};function r(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};(()=>{"use strict";r.r(s),r.d(s,{HDSModel:()=>t});const t=r(196)})(),HDSLib=s})();
//# sourceMappingURL=hds-lib.js.map